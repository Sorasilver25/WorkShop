<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <!-- Étape 5: Inclusion de Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        table {
            border-collapse: collapse;
            width: 50%;
            margin-bottom: 40px;
        }

        table,
        th,
        td {
            border: 1px solid #333;
        }

        th,
        td {
            padding: 8px 12px;
            text-align: center;
        }

        h2 {
            margin-top: 40px;
        }
    </style>
</head>

<body>

    <!-- Étape 3: Génération du tableau -->
    <h2>Tableau de données</h2>
    <table>
        <tr>
            <th>X</th>
            <th>Y</th>
        </tr>
        <?php if (!empty($data)): ?>
        <?php foreach ($data as $point): ?>
        <tr>
            <td>
                <?php echo htmlspecialchars($point['x']); ?>
            </td>
            <td>
                <?php echo htmlspecialchars($point['y']); ?>
            </td>
        </tr>
        <?php endforeach; ?>
        <?php else: ?>
        <tr>
            <td colspan="2">Le tableau est vide</td>
        </tr>
        <?php endif; ?>
    </table>

    <!-- Étape 4: Génération du graphique à points avec Chart.js -->
    <h2>Graphique à Points</h2>
    <canvas id="scatterChart" width="600" height="400"></canvas>

    <script>
        // Préparer les données pour Chart.js
        const dataPoints = '<? php echo json_encode($data); ?>';

        // Transformer les données en format compatible avec Chart.js
        const formattedData = dataPoints.map(point => ({
            x: point.x,
            y: point.y
        }));

        // Configuration du graphique
        const ctx = document.getElementById('scatterChart').getContext('2d');
        const scatterChart = new Chart(ctx, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Points',
                    data: formattedData,
                    backgroundColor: 'rgba(75, 192, 192, 0.6)'
                }]
            },
            options: {
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        title: {
                            display: true,
                            text: 'tata'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'test'
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Graphique à Points des Données'
                    }
                }
            }
        });
    </script>

</body>

</html>